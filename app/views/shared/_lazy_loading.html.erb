<div data-controller="lazy-loading" id="loading-screen"
     data-lazy-loading-target="screen"
     class="fixed inset-0 bg-gradient-to-br from-gray-900 to-gray-800 flex flex-col items-center justify-center z-50 p-4">
  <!-- Loader Container -->
  <div class="relative w-64 h-64 md:w-80 md:h-80">
    <!-- Outer decorative ring -->
    <div class="absolute inset-0 rounded-full bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 opacity-20 animate-pulse"></div>

    <!-- Main circle -->
    <div class="absolute inset-2 rounded-full bg-gray-800 flex items-center justify-center shadow-2xl">
      <div class="w-full h-full rounded-full bg-gradient-to-br from-gray-700 to-gray-800 flex items-center justify-center relative">
        <!-- Circular Progress Bar -->
        <svg class="w-full h-full -rotate-90" viewBox="0 0 100 100">
          <circle
            class="text-gray-700 stroke-current"
            stroke-width="4"
            cx="50"
            cy="50"
            r="45"
            fill="transparent"
          ></circle>
          <circle
            data-lazy-loading-target="progressCircle"
            class="text-blue-500 stroke-current transition-all duration-300 ease-in-out"
            stroke-width="4"
            stroke-linecap="round"
            cx="50"
            cy="50"
            r="45"
            fill="transparent"
            stroke-dasharray="282.74"
            stroke-dashoffset="282.74"
          ></circle>
        </svg>
        <!-- Progress Number -->
        <div class="absolute inset-0 flex items-center justify-center">
          <div data-lazy-loading-target="progressText" class="text-4xl md:text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500">
            0%
          </div>
        </div>
      </div>
    </div>

    <!-- Floating Icons -->
    <% icons = [
      { name: 'book', class: 'text-blue-400', style: "top: 4%; left: 50%;" },
      { name: 'lightbulb', class: 'text-yellow-400', style: "top: 27%; left: 90%;" },
      { name: 'graduation-cap', class: 'text-green-400', style: "top: 73%; left: 90%;" },
      { name: 'award', class: 'text-purple-400', style: "top: 96%; left: 50%;" },
      { name: 'rocket', class: 'text-red-400', style: "top: 73%; left: 10%;" },
      { name: 'brain', class: 'text-indigo-400', style: "top: 27%; left: 10%;" }
    ] %>

    <% icons.each_with_index do |icon, index| %>
      <div
        class="absolute w-10 h-10 md:w-12 md:h-12 <%= icon[:class] %> transition-all duration-300 ease-in-out"
        style="<%= icon[:style] %>; transform: translate(-50%, -50%); animation: iconFloat 3s ease-in-out <%= index * 0.5 %>s infinite alternate"
      >
        <% case icon[:name] %>
        <% when 'book' %>
          <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>
        <% when 'lightbulb' %>
          <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"></path><path d="M9 18h6"></path><path d="M10 22h4"></path></svg>
        <% when 'graduation-cap' %>
          <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 10v6M2 10l10-5 10 5-10 5z"></path><path d="M6 12v5c3 3 9 3 12 0v-5"></path></svg>
        <% when 'award' %>
          <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline></svg>
        <% when 'rocket' %>
          <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"></path><path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"></path><path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"></path><path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"></path></svg>
        <% when 'brain' %>
          <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"></path><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"></path></svg>
        <% end %>
      </div>
    <% end %>

    <!-- Decorative elements -->
    <div class="absolute top-0 left-0 w-4 h-4 bg-blue-400 rounded-full opacity-50 animate-ping"></div>
    <div class="absolute bottom-0 right-0 w-6 h-6 bg-purple-400 rounded-full opacity-50 animate-ping" style="animation-delay: 0.5s"></div>
    <div class="absolute top-1/4 right-1/4 w-3 h-3 bg-pink-400 rounded-full opacity-50 animate-ping" style="animation-delay: 0.7s"></div>
  </div>

  <!-- Loading Text -->
  <div class="mt-8 text-xl md:text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 text-center">
    Preparing Your Learning Journey...
  </div>
</div>

<style>
  @keyframes iconFloat {
    0% { transform: translate(-50%, -50%); }
    100% { transform: translate(-50%, -60%); }
  }
</style>
