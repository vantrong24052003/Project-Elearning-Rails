<%# app/views/shared/_header.html.erb %>

<div class="fixed top-0 left-0 right-0 z-50 dark:shadow-xl" data-controller="shared--header">
  <header class="bg-white/80 dark:bg-gray-900/80 backdrop-blur-md transition-all duration-300 ease-in-out" id="main-header">
    <div class="container mx-auto px-4 py-2 sm:py-4">
      <div class="flex items-center justify-between">
        <%= link_to root_path, class: "flex items-center space-x-2" do %>
        <svg class="h-6 w-6 sm:h-8 sm:w-8 text-purple-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path d="M12 14l9-5-9-5-9 5 9 5z" />
          <path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998a12.078 12.078 0 01.665-6.479L12 14z" />
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665-6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998a12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222" />
        </svg>
        <span class="text-xl sm:text-2xl font-bold bg-gradient-to-r from-purple-400 to-pink-500 text-transparent bg-clip-text">ELearn</span>
        <% end %>

        <% if current_page?(root_path) %>
        <nav class="hidden lg:flex space-x-2 xl:space-x-6">
          <% nav_items = [
                { name: 'Home', href: '#home' },
                { name: 'Features', href: '#features' },
                { name: 'Courses', href: '#courses' },
                { name: 'Testimonials', href: '#testimonials' },
                { name: 'Pricing', href: '#pricing' },
                { name: 'FAQ', href: '#faq' }
              ] %>

          <% nav_items.each do |item| %>
          <button class="text-sm xl:text-base text-gray-900 dark:text-white hover:text-purple-400 transition-colors px-2 sm:px-4 py-1 sm:py-2 rounded-md" data-action="shared--header#scrollToSection" data-shared--header-section-param="<%= item[:name].downcase %>">
            <%= item[:name] %>
          </button>
          <% end %>
        </nav>
        <% end %>

        <div class="flex items-center">
          <!-- Dark Mode Toggle Button -->
          <button type="button" id="theme-toggle" class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-1.5 sm:p-2.5 mr-1 sm:mr-2" data-action="shared--header#toggleTheme" aria-label="Toggle dark mode">
            <!-- Sun icon -->
            <svg id="theme-toggle-light-icon" class="w-4 h-4 sm:w-5 sm:h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
              <path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"></path>
            </svg>
            <!-- Moon icon -->
            <svg id="theme-toggle-dark-icon" class="hidden w-4 h-4 sm:w-5 sm:h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
              <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
            </svg>
          </button>

          <div class="hidden sm:flex sm:items-center">
            <% if user_signed_in? %>
            <%= link_to destroy_user_session_path, data: { turbo_method: :delete }, class: "text-sm md:text-base text-gray-900 dark:text-white hover:text-purple-400 transition-colors px-3 sm:px-4 py-1 sm:py-2 rounded-md ml-1" do %>
            Logout
            <% end %>
            <% else %>
            <%= link_to new_user_session_path, class: "text-sm md:text-base text-gray-900 dark:text-white hover:text-purple-400 transition-colors px-3 sm:px-4 py-1 sm:py-2 rounded-md ml-1" do %>
            Login
            <% end %>
            <%= link_to new_user_registration_path, class: "text-sm md:text-base bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-3 sm:px-4 py-1 sm:py-2 rounded-md ml-1" do %>
            Sign Up
            <% end %>
            <% end %>
          </div>

          <button class="lg:hidden text-gray-900 dark:text-white hover:text-purple-400 transition-colors p-1.5 sm:p-2 rounded-md ml-1" data-action="shared--header#toggleMobileMenu" aria-label="Toggle mobile menu" aria-expanded="false" aria-controls="mobile-menu">
            <svg class="h-5 w-5 sm:h-6 sm:w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
          </button>
        </div>
      </div>

      <div class="mt-4 lg:hidden transition-all duration-300 ease-in-out hidden" id="mobile-menu" data-shared--header-target="mobileMenu">
        <% if current_page?(root_path) %>
        <% nav_items.each do |item| %>
        <button class="w-full text-left text-gray-900 dark:text-white hover:text-purple-400 transition-colors py-2 px-4 rounded-md text-sm sm:text-base" data-action="shared--header#scrollToSectionAndCloseMobileMenu" data-shared--header-section-param="<%= item[:name].downcase %>">
          <%= item[:name] %>
        </button>
        <% end %>
        <% end %>

        <div class="pt-2 sm:hidden">
          <% if user_signed_in? %>
          <%= link_to "#", class: "block w-full text-left text-gray-900 dark:text-white hover:text-purple-400 transition-colors py-2 px-4 rounded-md text-sm" do %>
          <%= current_user.email %>
          <% end %>
          <%= link_to destroy_user_session_path, data: { turbo_method: :delete }, class: "block w-full text-left text-gray-900 dark:text-white hover:text-purple-400 transition-colors py-2 px-4 rounded-md text-sm" do %>
          Sign out
          <% end %>
          <% else %>
          <%= link_to new_user_session_path, class: "block w-full text-left text-gray-900 dark:text-white hover:text-purple-400 transition-colors py-2 px-4 rounded-md text-sm" do %>
          Log in
          <% end %>
          <%= link_to new_user_registration_path, class: "block w-full mt-2 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white py-2 px-4 rounded-md text-center text-sm" do %>
          Sign up
          <% end %>
          <% end %>
        </div>
      </div>
    </div>
  </header>
</div>
